
@model KadOzenka.Web.Models.Declarations.ParcelCharacteristicsModel

@using (Html.BeginForm("EditParcelCharacteristics", "Declarations", FormMethod.Post))
{
@Html.HiddenFor(m => m.Id)
@Html.HiddenFor(m => m.DeclarationId)
<div class="form-horizontal col-sm-12">
    <div class="form-group"></div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">1</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.Address)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.Address, 2, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">2</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.Square)
                </div>
                <div class="col-sm-7">
                    @Html.KendoNumericTextBoxFor(m => m.Square, precision: 2, isReadonly: !Model.IsEditDeclarationCharacteristics)
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">3</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.LandCategory)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.LandCategory, 1, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">4</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.PermittedUseType)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.PermittedUseType, 1, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">5</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.FactUse)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.FactUse, 2, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">6</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.NaturalObjectsInformation)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.NaturalObjectsInformation, 2, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">7</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.ZonesWithSpecialUsingConditionsInformation)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.ZonesWithSpecialUsingConditionsInformation, 4, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">8</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.ProtectedNaturalZonesInformation)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.ProtectedNaturalZonesInformation, 4, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">9</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.EconomicZonesInformation)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.EconomicZonesInformation, 4, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">10</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.EstablishedEasementsInformation)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.EstablishedEasementsInformation, 2, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">11</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.DistanceFromPavedRoads)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.DistanceFromPavedRoads, 2, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">12</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.PrecenceOfAccessRoads)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.PrecenceOfAccessRoads, 2, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">13</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.CommunicationsDescription)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.CommunicationsDescription, 2, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-2">
            <label class="control-label">13.1 Электроснабжение:</label>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">13.1.1</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.ConnectionToPowerGrids)
                </div>
                <div class="col-sm-3">
                    @Html.KendoEnumDropDownListFor(m => m.ConnectionToPowerGrids, isReadonly: !Model.IsEditDeclarationCharacteristics)
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">13.1.2</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.AvailabilityConnectionToPowerGrids)
                </div>
                <div class="col-sm-3">
                    @Html.KendoEnumDropDownListFor(m => m.AvailabilityConnectionToPowerGrids, isReadonly: !Model.IsEditDeclarationCharacteristics)
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">13.1.3</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.ElectricPower)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.ElectricPower, 1, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-2">
            <label class="control-label">13.2 Газоснабжение:</label>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">13.2.1</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.ConnectionToGasGrids)
                </div>
                <div class="col-sm-3">
                    @Html.KendoEnumDropDownListFor(m => m.ConnectionToGasGrids, isReadonly: !Model.IsEditDeclarationCharacteristics)
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">13.2.2</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.AvailabilityConnectionToGasGrids)
                </div>
                <div class="col-sm-3">
                    @Html.KendoEnumDropDownListFor(m => m.AvailabilityConnectionToGasGrids, isReadonly: !Model.IsEditDeclarationCharacteristics)
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">13.2.3</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.GasPower)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.GasPower, 1, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-2">
            <label class="control-label">13.3 Водоснабжение:</label>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">13.3.1</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.ConnectionToWaterSupply)
                </div>
                <div class="col-sm-3">
                    @Html.KendoEnumDropDownListFor(m => m.ConnectionToWaterSupply, isReadonly: !Model.IsEditDeclarationCharacteristics)
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">13.3.2</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.AvailabilityConnectionToWaterSupply)
                </div>
                <div class="col-sm-3">
                    @Html.KendoEnumDropDownListFor(m => m.AvailabilityConnectionToWaterSupply, isReadonly: !Model.IsEditDeclarationCharacteristics)
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-2">
            <label class="control-label">13.4 Теплоснабжение:</label>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">13.4.1</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.ConnectionToHeatSupply)
                </div>
                <div class="col-sm-3">
                    @Html.KendoEnumDropDownListFor(m => m.ConnectionToHeatSupply, isReadonly: !Model.IsEditDeclarationCharacteristics)
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">13.4.2</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.AvailabilityConnectionToHeatSupply)
                </div>
                <div class="col-sm-3">
                    @Html.KendoEnumDropDownListFor(m => m.AvailabilityConnectionToHeatSupply, isReadonly: !Model.IsEditDeclarationCharacteristics)
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-2">
            <label class="control-label">13.5 Водоотведение:</label>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">13.5.1</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.ConnectionToWaterDisposal)
                </div>
                <div class="col-sm-3">
                    @Html.KendoEnumDropDownListFor(m => m.ConnectionToWaterDisposal, isReadonly: !Model.IsEditDeclarationCharacteristics)
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">13.5.2</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.AvailabilityConnectionToWaterDisposal)
                </div>
                <div class="col-sm-3">
                    @Html.KendoEnumDropDownListFor(m => m.AvailabilityConnectionToWaterDisposal, isReadonly: !Model.IsEditDeclarationCharacteristics)
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">14</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.NearestWaterbodyDistance)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.NearestWaterbodyDistance, 1, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">15</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.NearestRecreationalZoneDistance)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.NearestRecreationalZoneDistance, 1, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">16</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.RailwaysDistance)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.RailwaysDistance, 1, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">17</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.RailwayStationsDistance)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.RailwayStationsDistance, 2, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">18</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.MiningZoneDistance)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.MiningZoneDistance, 2, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">19</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.TypeOfLand)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.TypeOfLand, 1, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">20</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.SoilConditionIndicators)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.SoilConditionIndicators, 2, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-1">
            <label class="control-label">21</label>
        </div>
        <div class="col-sm-11">
            <div class="row">
                <div class="col-sm-5">
                    @Html.CustomLabelFor(m => m.DisadvantagesPresence)
                </div>
                <div class="col-sm-7">
                    @Html.TextAreaFor(m => m.DisadvantagesPresence, 2, 0, new { @class = "k-textbox", @style = "width: 100%; resize: none;padding: 10px", @editMode = Model.IsEditDeclarationCharacteristics ? "true" : "false" })
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-12">
            <button disabled="@(!Model.IsEditDeclarationCharacteristics)" style="float: right" id="save" class="k-button" type="button">Сохранить</button>
        </div>
    </div>
</div>
}

<script type="text/javascript">
    $(document).ready(function () {
	    $('textarea[editmode="false"]').attr("readonly", "true");
        $('#save').on('click',
            function() {
                kendo.ui.progress($('body'), true);
                var form = $('form');
                var formObject = Common.Functions.FormToObject(form);

                $.post(form.attr('action'), formObject).done(function(response) {
                    kendo.ui.progress($('body'), false);
                    if (response.Errors) {
                        var errors = $.map(distinctErrors(response.Errors),
                            function(el) {
                                return el.Message;
                            });
                        Common.ShowError(errors);
                        return;
                    }

                    if (response.Success && response.data) {
                        $('#@Html.IdFor(m => m.Id)').val(response.data.Id);
                    Common.ShowMessage(response.Success);
                }
            });
        });
    });
    function distinctErrors(errors) {
        var result = [];
        $.each(errors, function(index, event) {
            var events = $.grep(result, function (e) {
                return event.Message === e.Message;
            });
            if (events.length === 0) {
                result.push(event);
            }
        });

        return result;
    }
</script>
