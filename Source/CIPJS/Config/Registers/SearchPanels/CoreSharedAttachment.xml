<RootElement>
    <ControlElement Caption="Данные образа" OwnType="RadPanel">
        <children>

            <ControlElement Caption="Образы текущего объекта" ID="current_object" OwnType="CheckBox" QueryOperation="Equal" Value="1" DataType="1" DefaultValue="true">

                <CustomQSCondition xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xsi:type="QSConditionGroup">
                    <Type>And</Type>
                    <Conditions>
                        <QSCondition xsi:type="QSConditionGroup">
                            <Type>Or</Type>
                            <Conditions>
                                <QSCondition xsi:type="QSConditionGroup">
                                    <Type>And</Type>
                                    <Conditions>
                                        <QSCondition xsi:type="QSConditionSimple">
                                            <ConditionType>Equal</ConditionType>
                                            <LeftOperand xsi:type="QSColumnSimple">
                                                <Alias>ИД реестра в связи</Alias>
                                                <AttributeID>98800300</AttributeID>
                                                <Type>Value</Type>
                                            </LeftOperand>
                                            <RightOperand xsi:type="QSColumnConstant">
                                                <Value xsi:type="xsd:string">{Get:AttachmentRegisterId}</Value>
                                            </RightOperand>
                                        </QSCondition>
                                        <QSCondition xsi:type="QSConditionSimple">
                                            <ConditionType>Equal</ConditionType>
                                            <LeftOperand xsi:type="QSColumnSimple">
                                                <Alias>ИД объекта в связи</Alias>
                                                <AttributeID>98800400</AttributeID>
                                                <Type>Value</Type>
                                            </LeftOperand>
                                            <RightOperand xsi:type="QSColumnConstant">
                                                <Value xsi:type="xsd:string">{Get:AttachmentObjectId}</Value>
                                            </RightOperand>
                                        </QSCondition>
                                    </Conditions>
                                </QSCondition>
                                <QSCondition xsi:type="QSConditionGroup">
                                    <Type>And</Type>
                                    <Conditions>
                                        <QSCondition xsi:type="QSConditionSimple">
                                            <ConditionType>Equal</ConditionType>
                                            <LeftOperand xsi:type="QSColumnSimple">
                                                <Alias>ИД реестра в ТД</Alias>
                                                <AttributeID>96301400</AttributeID>
                                                <Type>Value</Type>
                                            </LeftOperand>
                                            <RightOperand xsi:type="QSColumnConstant">
                                                <Value xsi:type="xsd:string">{Get:AttachmentRegisterId}</Value>
                                            </RightOperand>
                                        </QSCondition>
                                        <QSCondition xsi:type="QSConditionSimple">
                                            <ConditionType>Equal</ConditionType>
                                            <LeftOperand xsi:type="QSColumnSimple">
                                                <Alias>ИД объекта в ТД</Alias>
                                                <AttributeID>96301100</AttributeID>
                                                <Type>Value</Type>
                                            </LeftOperand>
                                            <RightOperand xsi:type="QSColumnConstant">
                                                <Value xsi:type="xsd:string">{Get:AttachmentObjectId}</Value>
                                            </RightOperand>
                                        </QSCondition>
                                    </Conditions>
                                </QSCondition>
                                <QSCondition xsi:type="QSConditionSimple">
                                    <ConditionType>In</ConditionType>
                                    <LeftOperand xsi:type="QSColumnSimple">
                                        <Alias>ИД экземпляра ТД</Alias>
                                        <AttributeID>96300100</AttributeID>
                                        <Type>Value</Type>
                                    </LeftOperand>
                                    <RightOperand xsi:type="QSColumnQuery">
                                        <SubQuery>
                                            <MainRegisterID>964</MainRegisterID>
                                            <Columns>
                                                <QSColumn xsi:type="QSColumnSimple">
                                                    <Alias>ИД ТД в наборе изменений</Alias>
                                                    <AttributeID>96400200</AttributeID>
                                                    <Type>Value</Type>
                                                </QSColumn>
                                            </Columns>
                                            <Condition xsi:type="QSConditionGroup">
                                                <Type>And</Type>
                                                <Conditions>
                                                    <QSCondition xsi:type="QSConditionSimple">
                                                        <ConditionType>Equal</ConditionType>
                                                        <LeftOperand xsi:type="QSColumnSimple">
                                                            <Alias>ИД реестра в изменении</Alias>
                                                            <AttributeID>96500300</AttributeID>
                                                            <Type>Value</Type>
                                                        </LeftOperand>
                                                        <RightOperand xsi:type="QSColumnConstant">
                                                            <Value xsi:type="xsd:string">{Get:AttachmentRegisterId}</Value>
                                                        </RightOperand>
                                                    </QSCondition>
                                                    <QSCondition xsi:type="QSConditionSimple">
                                                        <ConditionType>Equal</ConditionType>
                                                        <LeftOperand xsi:type="QSColumnSimple">
                                                            <Alias>ИД объекта в изменении</Alias>
                                                            <AttributeID>96500400</AttributeID>
                                                            <Type>Value</Type>
                                                        </LeftOperand>
                                                        <RightOperand xsi:type="QSColumnConstant">
                                                            <Value xsi:type="xsd:string">{Get:AttachmentObjectId}</Value>
                                                        </RightOperand>
                                                    </QSCondition>
                                                </Conditions>
                                            </Condition>
                                        </SubQuery>
                                    </RightOperand>
                                </QSCondition>
                            </Conditions>
                        </QSCondition>
                        <QSCondition xsi:type="QSConditionSimple">
                            <ConditionType>Equal</ConditionType>
                            <LeftOperand xsi:type="QSColumnSimple">
                                <Alias>Признак удаления связи</Alias>
                                <AttributeID>98800500</AttributeID>
                                <Type>Value</Type>
                            </LeftOperand>
                            <RightOperand xsi:type="QSColumnConstant">
                                <Value xsi:type="xsd:double">0</Value>
                            </RightOperand>
                        </QSCondition>
                    </Conditions>
                </CustomQSCondition>

            </ControlElement>

            <ControlElement Caption="Номер" ID="reg_number" OwnType="Text" AttributeNumber="98600200" QueryOperation="Like" />

            <ControlElement Caption="Дата создания" ID="date_panel" OwnType="Panel">
                <children>
                    <ControlElement Caption="с " ID="create_date_from" OwnType="Calendar" AttributeNumber="98600800" QueryOperation="MoreThan" />
                    <ControlElement Caption="по" ID="create_date_to" OwnType="Calendar" AttributeNumber="98600800" QueryOperation="LessThan" />
                </children>
            </ControlElement>

            <ControlElement Caption="Тип" ID="type" OwnType="Combo" ReferenceId="12082" AttributeNumber="98600500" QueryOperation="Equal" ComboBoxFilter="None"/>

            <ControlElement Caption="Штрих-код" ID="barcode" OwnType="Text" AttributeNumber="98600400" QueryOperation="Like" />

        </children>
    </ControlElement>
    <ControlElement Caption="Пользователь" OwnType="RadPanel" AttributeNumber="0">
        <children>
            <ControlElement Caption="Подразделение" ID="cbAuthorDepartment" OwnType="Combo" HasLinkedCombos="true" AttributeNumber="95000200" RegisterId="941" TextFieldAttribute="94100300" ValueFieldAttribute="94100100" QueryOperation="Equal" />
            <ControlElement Caption="ФИО" ID="cbAuthorUser" OwnType="Combo" AttributeNumber="98600700" RegisterId="950" TextFieldAttribute="95000400" ValueFieldAttribute="95000100" ParentFilterAttribute="95000200" QueryOperation="Equal">
                <parentComboBox>
                    <string>cbAuthorDepartment</string>
                </parentComboBox>
            </ControlElement>
        </children>
    </ControlElement>
</RootElement>
