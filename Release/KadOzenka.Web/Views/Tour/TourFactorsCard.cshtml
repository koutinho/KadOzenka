@model KadOzenka.Web.Models.Tour.TourFactorsModel

@Html.HiddenFor(m => m.RegisterFactorId)

<div style="height: auto">
    <div class="form-horizontal col-sm-12">
        <div class="form-group"></div>
        <div style="height: auto;">
            <div class="ajax-data-loading" data-request-type="GET" data-url="@Url.Content("~/RegistersView/KoToursFactorsList?Transition=1&93100300=" + @Model.RegisterFactorId.GetValueOrDefault()) + "
                 data-param-TourId="@Model.TourId" data-param-RegisterFactorId="@Model.RegisterFactorId" data-param-IsSteadObjectType="@Model.IsSteadObjectType" data-param-Pageable="true" data-param-Scrollable="true"
                 data-param-partialview="true" data-loader="true" data-onsuccess="resizeGrid214"></div>
        </div>
        <div class="form-group"></div>
    </div>
</div>


<script>
    $(function () {
        var registerId = $('#@Html.IdFor(m => m.RegisterFactorId)').val();
        if (!registerId) {
            var observer = new MutationObserver(function (mutationsList, observer) {
                for (let mutation of mutationsList) {
                    if (mutation.type === 'childList') {
                        if (mutation.removedNodes && mutation.removedNodes.length == 1 && mutation.removedNodes.item(0)
                            && mutation.removedNodes.item(0).classList && mutation.removedNodes.item(0).classList.contains('k-window')
                        ) {
                            window.location.reload();
                        }
                    }
                }
            });
            observer.observe(document.getElementsByTagName('body')[0], { childList: true, subtree: true });
        }
    })
</script>